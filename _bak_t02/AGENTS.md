
# AGENTS.md

Codex는 아래 지침을 무조건 준수하여 작업해야 합니다.  
이 지침은 코드 작성, 테스트, 저장소 운영 전반에 적용되며, **모든 내부 판단보다 우선**합니다.

---

## ✅ 작업 환경 및 제한

- Codex는 자신의 테스트 환경(torch 미설치 등)을 **절대 기준으로 삼지 말 것**.
- 모든 작업은 **사용자 로컬 기준(Windows 10 + RTX 4060, CUDA 11.8)** 으로 간주하고 수행할 것.
- torch는 반드시 GPU 전용 버전 2.3.0만 사용하며, torchtext는 0.18.0만 허용.
- CPU 버전은 **테스트에서도 절대 사용 금지**. 단, 내부 컨테이너 테스트용은 예외로 허용.

---

## ✅ 코드 작성 및 구조 규칙

1. 코드 파일은 250줄 이하로 유지. 초과 시 책임 단위로 파일 분할 (※ ui.html 및 데이터셋 예외)
2. 함수는 150줄 이하로 유지. 초과 시 리팩토링 또는 분할 필수
3. 모든 학습/임베딩/모델 파일은 `/models/`, 데이터셋은 `/datas/` 경로에서만 불러올 것
4. 폴더 및 파일 구조는 역할 기반으로 모듈화하고, **cross-import, 순환참조 금지**
5. 실행/테스트/설정은 각기 분리. 설정·상수는 config 파일에서만 관리
6. 테스트 코드는 메인 코드와 분리할 것
7. 예외처리, 로깅, 디버깅, 테스트 코드 항상 포함할 것
8. PEP8 준수, 타입 힌트, docstring 작성 필수
9. 코드, 변수, 함수명은 영어만 사용 / 주석은 한글만 사용
10. 작업 전 구조·경로·지침 검토 후 위반 시 **전체 코드 재출력**
11. 본 프로젝트는 한국어 챗봇을 개발하는게 목적이므로 한국어 기준의 문장을 생성해야함. (영어 또는 기타 외국어 아님)
12. 수정 사항 적용후 Changelog.md 파일에 내역 기록. (한국어로만 기록.)
13. 지시내용은 미처리 및 누락없이 충실히 이행하시오.
---

## ✅ 데이터셋 JSON 구조 기준

1. 대화쌍 데이터셋의 실전 양식은 datas 폴더의 json파일 참조

    question: 질문 관련 정보;
    text: 질문 원문 문자열;
    tokens: 질문 문장의 토큰별 형태소 및 품사 정보 배열 각 토큰은 다음 필드 포함;
    text: 토큰 텍스트;
    lemma: 토큰 기본형(어간);
    pos: 국립국어원 표준 품사 태그 (예: NNG, VV, JKS 등);
    answer: 답변 관련 정보 (question과 동일 구조);
    concepts: 질문과 답변에서 추출한 핵심 개념 또는 키워드 배열 (문자열 목록);
    domain: 대화쌍이 속하는 주제 분야(예: 기술, 역사, 문화 등) 문자열;

2. raw데이터 형식의 데이터셋도 존재함.

## ✅ 학습 로직 강제 기준

- torch는 `import torch`로 직접 로딩하고, 실패 시 로직을 우회하지 말 것
- JSON 기반 우회 저장 금지. 학습 모델은 반드시 `.pth`로 `torch.save()` 저장
- 모델 저장 후 `.exists()` 및 `파일 크기 ≥ 1MB` 검증 필수
- 학습 로그는 `Training complete`, `Model saved to ...` 등 명시적으로 출력할 것
- 삭제 버튼은 실제 `.pth` 파일 삭제 동작과 연결되어야 함

---

## 🚫 수정 금지 사항

- `README.md`는 절대 수정 금지. 문법 변경, 포맷 보정, 문구 추가 모두 불허
- 문서 내용 변경이 필요한 경우 사용자의 명시적 지시가 있어야 함

---

## 📌 기타

- 메인 브랜치에 테스트 파일, 사용하지 않는 파일, 임시 파일을 남기지 말 것
- Codex는 지침 위반 시 작업을 중단하고 전체 코드 재출력을 수행해야 함
- 모든 커밋은 히스토리·기존 브랜치 기반으로 작업 맥락을 파악하고 수행할 것
