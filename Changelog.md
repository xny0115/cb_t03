# Changelog

## [v0.3.0] - 2025-08-08

### 주요 변경 사항 (Major Changes)

-   **아키텍처 안정화 및 버그 수정:** 초기 리팩터링 이후 발견된 주요 버그들을 수정하고, 코드의 안정성과 사용자 경험을 개선하여 프로젝트를 최종적으로 정상화했습니다.

### 세부 변경 내역 (Details)

#### 1. 학습 로직 및 안정성 개선
-   **학습 이어하기 기능 구현:** 학습을 다시 시작할 때, 처음부터 훈련하는 대신 가장 최근에 저장된 모델의 상태를 이어받아 추가로 학습하도록 구현했습니다. (`src/training/simple.py`, `src/service/service.py`)
-   **GPU 오류 처리 강화:** 학습 시 GPU를 사용할 수 없는 경우, UI에 명확한 오류 메시지가 표시되도록 백엔드(`src/ui/backend.py`)의 예외 처리 로직을 강화했습니다.
-   **데이터 타입 버그 수정:** `pretrain` 모드에서, 불러온 데이터(문자열 리스트)를 올바른 형식(`InstructionSample` 객체 리스트)으로 변환하지 않고 전달하여 발생하던 `AttributeError`를 수정했습니다. (`src/service/service.py`)

#### 2. 데이터 파이프라인 견고성 향상
-   **`prepare_data.py` 스크립트 버그 수정:**
    -   파일 경로에 공백이나 한글 등 특수문자가 포함된 경우, `SentencePiece`가 경로를 잘못 해석하던 문제를 해결했습니다. (인자 전달 방식을 안전한 키워드 방식으로 변경)
    -   Windows 환경에서 한글 경로를 읽지 못하던 문제를, Python의 `codecs` 라이브러리를 사용하여 파일을 직접 읽도록 변경하여 해결했습니다.

#### 3. UI/UX 개선
-   **Auto-Tune 기능 개선:** `ui.html`에서 Auto-Tune 버튼 클릭 시, 페이지 전체를 새로고침하는 대신 변경된 설정값이 UI에 동적으로 즉시 반영되도록 수정하여 사용자 경험을 개선했습니다.
-   **설정 유효성 검사 명확화:** `ui.html`의 JavaScript 코드에서, 학습 시작 전 설정값을 검증하는 로직을 더 명확하고 합리적으로 변경했습니다.

#### 4. 코드 품질 및 유연성 향상
-   **하드코딩 제거:** `src/training/simple.py` 및 `src/service/service.py`에 하드코딩되어 있던 토크나이저 모델 경로를 `config/default.yaml`에서 관리하도록 변경하여 유연성을 높였습니다.

---

## [v0.2.0] - 2025-08-08

### 주요 변경 사항 (Major Changes)

-   **핵심 아키텍처 리팩터링 (Core Architecture Refactoring):** 프로젝트의 전반적인 안정성, 성능, 확장성을 개선하기 위해 대대적인 아키텍처 리팩터링을 진행했습니다.

### 세부 변경 내역 (Details)

#### 1. 토크나이저 교체 (`CharTokenizer` -> `SentencePiece`)
-   **문제점:** 기존의 문자(Character) 단위 토크나이저는 한국어의 의미 구조를 학습하기 어려워 모델의 성능과 학습 속도를 저하 시키는 결정적인 원인이었습니다.
-   **개선 사항:**
    -   `SentencePiece` (BPE) 기반의 서브워드(Subword) 토크나이저를 도입하여, 모델이 단어의 의미 단위를 효과적으로 학습할 수 있도록 변경했습니다.
    -   이를 통해 모델의 대화 품질 향상과 학습 속도 개선을 기대할 수 있습니다.
    -   `requirements.txt`에 `sentencepiece` 라이브러리를 추가했습니다.

#### 2. 오프라인 데이터 파이프라인 구축
-   **문제점:** 기존에는 학습 시작 시 매번 실시간으로 데이터를 정제하고 토크나이저 어휘 사전을 구축하여 비효율적이었습니다.
-   **개선 사항:**
    -   `scripts/prepare_data.py` 스크립트를 새로 추가했습니다.
    -   이 스크립트를 통해 사전에 전체 학습 데이터를 기반으로 토크나이저를 미리 학습시키고, 모델 파일(`spm_bpe_8k.model`)로 저장합니다.
    -   학습 시에는 미리 생성된 토크나이저를 불러와 사용하도록 변경하여, 학습 시작 시간을 단축하고 일관성을 확보했습니다.

#### 3. 고급 답변 생성(Sampling) 기능 구현
-   **문제점:** UI에는 Top-k, Top-p, Temperature 등 다양한 답변 생성 옵션이 있었지만, 실제 모델의 `generate` 함수에는 해당 기능이 구현되어 있지 않았습니다.
-   **개선 사항:**
    -   `src/model/transformer.py`의 `generate` 함수를 다시 작성하여, UI의 설정값이 실제 답변 생성 과정에 반영되도록 구현했습니다.
    -   `src/service/service.py`의 `infer` 메소드를 수정하여, 설정된 값을 모델에 전달하도록 연결했습니다.

#### 4. 코드 리팩터링 및 정리
-   **모델 저장/로드:** `src/model/transformer.py`의 모델 저장/로드 함수에서 비효율적인 어휘 사전(vocab) 직접 저장을 제거하고, 모델 설정(config)을 통해 어휘 크기를 관리하도록 변경했습니다.
-   **학습 파이프라인:** `src/training/simple.py`의 코드를 리팩터링하여, 새로운 토크나이저와 오프라인 데이터 파이프라인에 맞춰 동작하도록 단순화하고 명확하게 개선했습니다.
